(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(n,e,r){"use strict";var t=r(18),i=r(7);var o=t.of_list;var u=[function(n){return i.caml_array_get(n,0)}];e.render_string=function(n){return n},e.render_array=function(n){return n},e.render_list=o,e.$$TouchList=u,e.Env=[]},26:function(n,e,r){n.exports=r(27)},27:function(n,e,r){"use strict";var t=r(28),i=r(52),o=r(13),u=r(57);r(58);var a=0|Date.now();i.renderToElementWithId(o.element(void 0,void 0,t.make(a,[])),"root"),u.default(),e.register_service_worker=function(n){return u.default(),0},e.randomSeed=a},28:function(n,e,r){"use strict";var t=r(29),i=r(46),o=r(14),u=r(1),a=r(19),c=r(6),f=r(3),s=r(51),l=r(5),d=r(13),v=[[0,[0,[0,[0,0]]]],[[0,[0,[0,[0,0]]]],[[0,[0,[0,[0,0]]]],[[0,[0,[0,[0,0]]]],0]]]],_=d.reducerComponent("App");e.empty_grid=v,e.component=_,e.make=function(n,e){var r=function(n,e){switch(n.key){case"ArrowDown":return u._1(e[3],o.__(0,[3]));case"ArrowLeft":return u._1(e[3],o.__(0,[0]));case"ArrowRight":return u._1(e[3],o.__(0,[1]));case"ArrowUp":return u._1(e[3],o.__(0,[2]));case"q":return u._1(e[3],0);default:return 0}},m=t.fill_random_empty_tile(n),g=function(n){var e=u._1(m,n);return void 0!==e?e:n},h=function(n){return[g(g(v)),0,!1,[void 0]]};return[_[0],_[1],_[2],_[3],function(n){var e=u._1(n[0],r);return document.addEventListener("keyup",e),u._1(n[4],function(n){return document.removeEventListener("keyup",e),0})},_[5],_[6],_[7],_[8],function(n){var e;return e=c.createElement("span",void 0),c.createElement("div",void 0,c.createElement("header",void 0,c.createElement("h1",{className:"heading"},a.render_string("2048 "),c.createElement("span",{className:"reason"},c.createElement("span",{className:"re"},a.render_string("RE")),a.render_string("ASONS")))),c.createElement("div",{className:"controls"},e,c.createElement("button",{className:"new-game",onClick:function(e){return u._1(n[3],2)},onTouchEnd:function(e){return u._1(n[3],2)}},a.render_string("New Game"))),d.element(void 0,void 0,s.make(function(e){return u._1(n[3],o.__(0,[e]))},[d.element(void 0,void 0,i.make(n[1][0],n[1][1],[]))])),c.createElement("section",{className:"hint"},a.render_string("use \u2190, \u2191, \u2192 and \u2193 to play")))},function(n){return h()},_[11],function(n,e){if("number"!==typeof n){if(n.tag)return cancelAnimationFrame(n[0]),o.__(0,[[e[0],e[1],!1,[void 0]]]);var r=t.merge(n[0])(e[0]);if(f.caml_equal(r,e[0]))return t.is_mergeable(r)?0:o.__(0,[[e[0],3,e[2],e[3]]]);var i=u._1(m,r);return void 0!==i?o.__(0,[[i,e[1],e[2],e[3]]]):o.__(0,[[e[0],3,e[2],e[3]]])}switch(n){case 0:var a=t.best_move(e[0]);if(void 0!==a){var c=a;return o.__(1,[function(n){return u._1(n[3],o.__(0,[c]))}])}var s=e[3][0];return void 0!==s?(cancelAnimationFrame(l.valFromOption(s)),o.__(0,[[e[0],3,!1,e[3]]])):o.__(0,[[e[0],3,!1,e[3]]]);case 1:return o.__(0,[[e[0],e[1],!0,e[3]]]);case 2:return o.__(0,[h()])}},_[13]]}},29:function(n,e,r){"use strict";var t=r(2),i=r(18),o=r(33),u=r(3),a=r(7),c=r(9),f=r(41),s=r(12);function l(n){var e=s.Infix[1];return function(r){return e(function(e){return t.nth(e,n[1])},function(e){return t.nth(e,n[0])},r)}}function d(n){var e=f.partition(function(n){return 0!==n},n);return c.$at(e[1],e[0])}function v(n){return f.fold_lefti(function(n,e){return function(r){return f.fold_lefti(function(n,r,t){return 0===t?c.$at(n,[[r,e],0]):n},n,r)}},0,n)}function _(n){return t.mapi(function(e){return function(r){return t.mapi(function(r,t){return l([e,r])(n)},r)}},n)}function m(n){for(var e=0,r=d(n);;){var t=r,i=e;if(!t)return t;var o=t[1];if(!o)return t;var u=o[1];if(!u)return t;var a=u[1];if(!a||a[1])return t;var c=a[0],f=u[0],s=o[0],l=t[0];switch(i){case 0:if(f===c){r=[0,[l,[s,[f<<1,0]]]],e=1;continue}return t;case 1:if(s===f){r=[0,[l,[s<<1,[c,0]]]],e=2;continue}return t;case 2:if(l===s){r=[0,[l<<1,[f,[c,0]]]],e=3;continue}return t;default:return t}}}var g=s.Infix[1];function h(n){return g(t.rev,m,n)}var p=s.Infix[1];function w(n){return p(h,t.rev,n)}function E(n){return t.map(m,n)}function k(n){return t.map(w,n)}function y(n){switch(n){case 0:return k;case 1:return E;case 2:var e=s.Infix[1],r=function(n){return e(_,k,n)},t=s.Infix[1];return function(n){return t(r,_,n)};case 3:var i=s.Infix[1],o=function(n){return i(_,E,n)},u=s.Infix[1];return function(n){return u(o,_,n)}}}function x(n,e,r){var i=t.nth(r,e[1]),o=f.update(n,e[0],i);return f.update(o,e[1],r)}function N(n){return f.fold_lefti(function(n,e){return function(e){return f.fold_lefti(function(n,e,r){return n+r|0},n,e)}},0,n)}function I(n){return t.filter(function(e){return u.caml_notequal(e[1],n)})(t.map(function(e){var r=y(e)(n),i=t.length(v(r));return[e,r,N(r),i]},[1,[2,[3,[0,0]]]]))}var b=s.Infix[1];function $(n){return b(I,function(n){return t.sort(function(n,e){return e[3]-n[3]|0},n)},n)}var A=s.Infix[1];function S(n){return A($,function(n){return t.sort(function(n,e){return e[2]-n[2]|0},n)},n)}var G=s.Infix[1];var T=s.Infix[1];function L(n){return T(I,t.length,n)}var W=s.Infix[1];e.length_diff=function(n,e){return t.length(n)-t.length(e)|0},e.get_position=l,e.shift_zeroes=d,e.find_zeroes=v,e.get_columns=_,e.merge_row_right=m,e.merge_row_left=w,e.merge_grid_right=E,e.merge_grid_left=k,e.merge=y,e.update_grid=x,e.fill_random_empty_tile=function(n){return o.init(n),function(n){var e,r=v(n);if(r)if(r[1]){var i=o.$$int(t.length(r));e=0!==i?t.nth(r,i-1|0):t.hd(r)}else e=r[0];else e=void 0;if(void 0!==e)return x(o.$$int(100)<90?2:4,e,n)}},e.get_score=N,e.direction_to_string=function(n){switch(n){case 0:return"left";case 1:return"right";case 2:return"up";case 3:return"down"}},e.grid_to_matrix=function(n){var e=i.make_matrix(4,4,0);return t.iteri(function(n){return function(r){return t.iteri(function(r,t){return a.caml_array_set(a.caml_array_get(e,n),r,t)},r)}},n),e},e.get_valid_moves=I,e.best_move=function(n){return G(S,function(n){if(0!==t.length(n))return t.hd(n)[0]},n)},e.is_mergeable=function(n){return W(L,function(n){return 0!==n},n)}},46:function(n,e,r){"use strict";var t=r(2),i=r(19),o=r(6),u=r(13),a=r(12);r(49);var c=u.statelessComponent("Grid"),f=a.Infix[1];function s(n){return f(function(n){return t.mapi(function(n,e){var r=e>0;return o.createElement("div",{key:"tile-"+String(n),className:"Grid-tile tile-"+String(e)},i.render_string(r?String(e):""))},n)},i.render_list,n)}var l=a.Infix[1];function d(n){return l(function(n){return t.mapi(function(n,e){return o.createElement("div",{key:"row-"+String(n),className:"Grid-row"},s(e))},n)},i.render_list,n)}e.component=c,e.render_tiles=s,e.render_rows=d,e.make=function(n,e,r){return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],function(r){return o.createElement("div",{className:"Grid-container"},o.createElement("div",{className:"Grid"},d(n)),3!==e?o.createElement("span",void 0):o.createElement("div",{className:"Grid-overlay"},o.createElement("div",{className:"Grid-overlay-message"},i.render_string("game over"))))},c[10],c[11],c[12],c[13]]}},49:function(n,e,r){},51:function(n,e,r){"use strict";var t=r(1),i=r(19),o=r(13);function u(n){var e=i.$$TouchList[0](n);return[e.screenX,e.screenY,Date.now()]}var a=o.statelessComponent("SwipeZone"),c=[[0,0,0],[0,0,0]];function f(n){var e=n[0],r=n[1],t=r[2]-e[2],i=function(n,e){return 1e4*(n-e)/t},o=i(r[1],e[1]),u=i(r[0],e[0]);return Math.abs(o)>Math.abs(u)?o-4e3>0?3:o+4e3<0?2:void 0:u-4e3>0?1:u+4e3<0?0:void 0}e.get_touch_position=u,e.component=a,e.touchRecorder=c,e.get_swipe_direction=f,e.make=function(n,e){var r=function(n){return c[0]=u(n.targetTouches),0},i=function(e){e.preventDefault(),c[1]=u(e.changedTouches);var r=f(c);return void 0!==r?t._1(n,r):0};return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],function(n){return o.createDomElement("div",{onTouchStart:r,onTouchEnd:i},e)},a[10],a[11],a[12],a[13]]}},57:function(n,e,r){"use strict";r.r(e),r.d(e,"default",function(){return i}),r.d(e,"unregister",function(){return u});var t=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(){if("serviceWorker"in navigator){if(new URL("/2048-reasons",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("/2048-reasons","/service-worker.js");t?function(n){fetch(n).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(n){n.unregister().then(function(){window.location.reload()})}):o(n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n):o(n)})}}function o(n){navigator.serviceWorker.register(n).then(function(n){n.onupdatefound=function(){var e=n.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(n){console.error("Error during service worker registration:",n)})}function u(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},58:function(n,e,r){}},[[26,2,1]]]);
//# sourceMappingURL=main.3f4e03a9.chunk.js.map